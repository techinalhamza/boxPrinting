<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="shop.css" />
    <link rel="stylesheet" href="responsive.css " />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
      integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <!-- bootstrap cdn -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <!-- google font -->
    <link
      href="https://fonts.googleapis.com/css2?family=Gloock&family=Inter&display=swap"
      rel="stylesheet"
    />
    <title>Shop Page</title>
  </head>
  
  <body>
    <header>
      <div class="main-container">
        <div class="header-container">
          <!-- Logo Section -->
          <div class="logo">
            <a href="/">
              <img src="images/updatedLogo2.png" alt="Logo" />
            </a>
          </div>

          <!-- Search Bar -->
          <div class="header-search-bar">
            <div class="search-btn">
              <i class="fa-solid fa-magnifying-glass"></i>
            </div>
            <input
              type="search"
              placeholder="Search products..."
              id="searchInput"
            />
          </div>

          <!-- Contact Details -->
          <div class="contact-details">
            <div class="nav-phone">
              <div class="phone-icon">
                <!-- <i class="fa-solid fa-phone-volume"></i> -->
                <img src="/images/phone-call.svg" alt="" />
              </div>
              <div class="nav-num">
                <p style="font-size: 12px; color: #7a869a">
                  Need Help? Call us
                </p>
                <p>(713) 893-4763</p>
              </div>
            </div>
            <div class="nav-divider">|</div>
            <div class="nav-account">
              <div class="user-icon">
                <i class="fa-regular fa-user"></i>
              </div>
              <p>My Account</p>
            </div>
            <div class="hamburger-menu">
              <i id="hamburgerIcon" class="fas fa-bars"></i>
              <div id="menu hamburgerIcon" onclick="onClickMenu()">
                <div id="bar1" class="bar"></div>
                <div id="bar2" class="bar"></div>
                <div id="bar3" class="bar"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </header>

    <!-- Navigation Bar -->
    <div class="main-container">
      <nav class="nav-container">
        <ul class="nav-links menu">
          <!-- Products List Dropdown -->
          <li class="menu-item" onmouseenter="toggleDropdown(true)" onmouseleave="toggleDropdown(false)">
            <a href="/shop.html" class="menu-link">
              Products List
              <span class="dropdown-icon">&#9660;</span> <!-- Down arrow icon -->
            </a>
            <div class="nav-dropdown" id="productDropdown">
              <div class="dropdown-content" id="dropdownContent"></div>
            </div>
          </li>

          <!-- Other Links -->
          <li><a href="#">Quote By Style</a></li>
          <li><a href="#">Upload Your Artwork</a></li>
          <li><a href="#">Free Design Services</a></li>
          <li><a href="#">Sample Request</a></li>
        </ul>

        <!-- Discount Tagline -->
        <div class="nav-discount-tagline">
          <!-- <i class="fas fa-percentage"></i> -->
          <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="1.5"
            stroke="currentColor"
            class="size-6 discount-icon"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="m8.99 14.993 6-6m6 3.001c0 1.268-.63 2.39-1.593 3.069a3.746 3.746 0 0 1-1.043 3.296 3.745 3.745 0 0 1-3.296 1.043 3.745 3.745 0 0 1-3.068 1.593c-1.268 0-2.39-.63-3.068-1.593a3.745 3.745 0 0 1-3.296-1.043 3.746 3.746 0 0 1-1.043-3.297 3.746 3.746 0 0 1-1.593-3.068c0-1.268.63-2.39 1.593-3.068a3.746 3.746 0 0 1 1.043-3.297 3.745 3.745 0 0 1 3.296-1.042 3.745 3.745 0 0 1 3.068-1.594c1.268 0 2.39.63 3.068 1.593a3.745 3.745 0 0 1 3.296 1.043 3.746 3.746 0 0 1 1.043 3.297 3.746 3.746 0 0 1 1.593 3.068ZM9.74 9.743h.008v.007H9.74v-.007Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm4.125 4.5h.008v.008h-.008v-.008Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"
            />
          </svg>

          <p>Get 10% off when you buy 2 custom products!</p>
        </div>
      </nav>
    </div>
    <!-- shop page -->
    <div class="shop-main-container">
      <div class="listing-us-breadcrumb">
        <div class="listing-overlay">
          <h1 class="listing-title">All Listing</h1>
        </div>
      </div>
      <div class="main-container">
        <div class="products-topbar">
          <div class="product-result">
            <h3 class="">
              Showing results for
              <span id="productCount">20</span>
              products
            </h3>
          </div>
          <div class="dropdown">
            <button
              class="btn btn-secondary dropdown-toggle"
              type="button"
              data-bs-toggle="dropdown"
              aria-expanded="false"
            >
              Dropdown button
            </button>
            <ul class="dropdown-menu">
              <li><a class="dropdown-item" href="#">Action</a></li>
              <li><a class="dropdown-item" href="#">Another action</a></li>
              <li><a class="dropdown-item" href="#">Something else here</a></li>
            </ul>
          </div>
        </div>
        <!-- Product Lists -->
        <div id="product-list">
          <div class="all-product-container" id="listingProducts">
            <!-- Loop through products here -->
            
            <!-- Repeat similar blocks for other products -->
          </div>
        </div>
      </div>
    </div>

    <!-- footer top newsletter -->
    <div class="footer-top-container">
      <div class="main-container">
        <div class="grid-container">
          <div class="content">
            <h1 class="heading">
              Sign up for exclusive promotions on
              <br />
              our packaging products.
            </h1>
          </div>

          <div class="newslatter-mail-input">
            <input class="input" type="text" placeholder="Enter Name" />
            <input class="input" type="email" placeholder="Enter Email" />
            <!-- <button class="">Notify Me</button> -->
            <input type="button" value="Notify Me" />
          </div>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <div class="footer-container">
      <div class="main-container">
        <div class="footer-content">
          <div class="footer-data">
            <div class="footer-col">
              <h1 class="footer-logo">VALUE BOX PRINTING</h1>
              <div class="company-info">
                <p>
                  valueBox is your go-to for custom box printing. We create
                  packaging that reflects your brand, combining quality and
                  design to bring your ideas to life.
                </p>
              </div>
            </div>

            <div class="footer-col">
              <div class="hd">Quick Links</div>
              <div class="links">
                <ul>
                  <li>
                    <a href="/"><i class="fas fa-arrow-right"></i> Home</a>
                  </li>
                  <li>
                    <a href="/shop"><i class="fas fa-arrow-right"></i> Shop</a>
                  </li>
                  <li>
                    <a href="/about"
                      ><i class="fas fa-arrow-right"></i> About us</a
                    >
                  </li>
                  <li>
                    <a href="/contact"
                      ><i class="fas fa-arrow-right"></i> Contact us</a
                    >
                  </li>
                </ul>
              </div>
            </div>

            <div class="footer-col">
              <div class="hd">Company</div>
              <div class="links">
                <ul>
                  <li>
                    <a href="/delivery-info"
                      ><i class="fas fa-arrow-right"></i> Delivery
                      Information</a
                    >
                  </li>
                  <li>
                    <a href="/privacy-policy"
                      ><i class="fas fa-arrow-right"></i> Privacy Policy</a
                    >
                  </li>
                  <li>
                    <a href="/term-conditions"
                      ><i class="fas fa-arrow-right"></i> Terms & Conditions</a
                    >
                  </li>
                  <li>
                    <a href="/support"
                      ><i class="fas fa-arrow-right"></i> Support Center</a
                    >
                  </li>
                </ul>
              </div>
            </div>

            <div class="footer-col">
              <div class="hd">Social Links</div>
              <div class="links">
                <ul>
                  <li>
                    <a><i class="fab fa-facebook"></i> Facebook</a>
                  </li>
                  <li>
                    <a><i class="fab fa-instagram"></i> Instagram</a>
                  </li>
                  <li>
                    <a><i class="fab fa-tiktok"></i> Tiktok</a>
                  </li>
                  <li>
                    <a><i class="fab fa-linkedin"></i> Linkedin</a>
                  </li>
                  <li>
                    <a><i class="fab fa-whatsapp"></i> WhatsApp</a>
                  </li>
                </ul>
              </div>
            </div>

            <div class="footer-col">
              <div class="contact-title">Contact Us</div>
              <div class="contact-info">
                <h1>
                  <i class="fas fa-location-dot"></i> <span>Address:</span> 5171
                  W Campbell Ave undefined Kent, Utah 53127 Lahore
                </h1>
                <h1>
                  <i class="fas fa-headphones-simple"></i>
                  <span>Call Us:</span> (+91) - 540-025-124553
                </h1>
                <h1>
                  <i class="fas fa-paper-plane"></i>
                  <span>Email:</span> info@valueBoxprinting.com
                </h1>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Footer Bottom Section -->
    <div class="copy-right-contianer">
      <div class="main-container">
        <div class="copy-right-content">
          <div class="copy-tagline">
            <p class="">© 2024 ValueBox. All Rights Reserved</p>
          </div>
          <div class="payment-icons">
            <img src="/images/payment.png" alt="" />
          </div>
        </div>
      </div>
    </div>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
    <!-- <script src="products.js"></script> -->
    <!-- <script src="shop.js"></script> -->
    <script src="script.js"></script>
    <script>
     async function fetchProducts() {
  const response = await fetch("products.json");
  const productsData = await response.json();

  // Check if there's a search query in the URL
  const urlParams = new URLSearchParams(window.location.search);
  const searchQuery = urlParams.get("search");

  if (searchQuery) {
    // Filter products based on the search query
    const filteredProductsData = filterProductsData(productsData, searchQuery);
    renderProductsOnShop(filteredProductsData); // Render only filtered products
  } else {
    renderProductsOnShop(productsData); // Render all products if no search query
  }
}

// Function to filter products based on the search query
function filterProductsData(productsData, searchQuery) {
  return productsData
    .map(category => ({
      ...category,
      items: category.items.filter(product => 
        product.name.toLowerCase().includes(searchQuery.toLowerCase())
      )
    }))
    .filter(category => category.items.length > 0); // Remove categories without matching products
}

// Function to filter products directly on shop.html without redirecting
function filterProductsOnShop(searchQuery) {
  fetch("products.json")
    .then(response => response.json())
    .then(productsData => {
      const filteredProductsData = filterProductsData(productsData, searchQuery);
      renderProductsOnShop(filteredProductsData);
    })
    .catch(error => console.error("Error fetching products:", error));
}

// Function to render products on the shop page
function renderProductsOnShop(products) {
  const listingProducts = document.getElementById("listingProducts");
  const productCount = document.getElementById("productCount");

  if (!listingProducts) {
    console.error("Element with id 'listingProducts' not found!");
    return;
  }

  // Calculate the total count of all displayed products
  const totalProductCount = products.reduce((acc, val) => acc + val.items.length, 0);
  productCount.innerHTML = ` ${totalProductCount}`; // Set the total count

  listingProducts.innerHTML = ""; // Clear existing content

  // Generate HTML for all products
  const cluster = products
    .flatMap(category => category.items.map(product => `
      <a href="/singleproduct.html?id=${product.id}" class="product-link">
        <div class="product-card">
          <div class="product-content">
            <div class="product-image-bx">
              <img src="${product.img}" alt="${product.name}" class="product-image"/>
            </div>
            <div class="product-info">
              <h1 class="product-name">${product.name}</h1>
              <p class="product-description">${product.desc.substr(0, 50)}...</p>
            </div>
            <div class="product-btn">
              <div class="rating">★★★★☆</div>
              <button class="buy-now-btn">Buy Now</button>
            </div>
          </div>
        </div>
      </a>
    `))
    .join(""); // Join to create a single string for innerHTML

  listingProducts.innerHTML = cluster; // Set the HTML structure to the listingProducts element
}

// Call fetchProducts on DOM load to populate products on shop.html
document.addEventListener("DOMContentLoaded", () => {
  if (window.location.pathname.includes("shop.html")) {
    fetchProducts();
  }
});
    </script>
  </body>
</html>
